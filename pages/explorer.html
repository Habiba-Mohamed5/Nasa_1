<!-- Terra Explorer Page - Real NASA Data Visualization -->
<div class="container">
    <!-- Hero Section -->
    <section style="margin-bottom: 40px; text-align: center;">
        <div class="explorer-hero">
            <h1>ğŸ›°ï¸ Ø§Ø³ØªÙƒØ´Ø§Ù Ø¨ÙŠØ§Ù†Ø§Øª Terra Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©</h1>
            <p>Ø±Ø­Ù„Ø© ØªÙØ§Ø¹Ù„ÙŠØ© Ø¹Ø¨Ø± 25 Ø³Ù†Ø© Ù…Ù† Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø±Ø¶ Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ù‚Ù…Ø± Ø§Ù„ØµÙ†Ø§Ø¹ÙŠ Terra</p>
            <div class="explorer-badge">
                <span>ğŸŒ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…Ù† NASA â€¢ MODIS â€¢ ASTER â€¢ CERES â€¢ MOPITT â€¢ MISR</span>
            </div>
        </div>
    </section>

    <!-- Control Panel -->
    <div class="panel" style="margin-bottom: 20px;">
        <div class="control-panel">
            <div class="control-header">
                <h3>ğŸ® Ù…Ø±ÙƒØ² Ø§Ù„ØªØ­ÙƒÙ…</h3>
                <p>ØªØ­ÙƒÙ… ÙÙŠ Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©</p>
            </div>
            <div class="region-selector">
                <select id="regionSelect" class="region-select">
                    <option value="world">ğŸŒ Ø§Ù„Ø¹Ø§Ù„Ù… ÙƒÙ„Ù‡</option>
                    <option value="amazon">ğŸŒ³ Ø§Ù„Ø£Ù…Ø§Ø²ÙˆÙ†</option>
                    <option value="arctic">â„ï¸ Ø§Ù„Ù‚Ø·Ø¨ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ</option>
                    <option value="africa">ğŸ¦ Ø¥ÙØ±ÙŠÙ‚ÙŠØ§</option>
                    <option value="asia">ğŸ”ï¸ Ø¢Ø³ÙŠØ§</option>
                </select>
            </div>
        </div>
        
        <!-- Dataset Selection -->
        <div class="dataset-buttons">
            <button class="dataset-btn active" data-dataset="vegetation">
                ğŸŒ± Ø§Ù„ØºØ·Ø§Ø¡ Ø§Ù„Ù†Ø¨Ø§ØªÙŠ (NDVI)
            </button>
            <button class="dataset-btn" data-dataset="ice">
                â„ï¸ Ø§Ù„ØºØ·Ø§Ø¡ Ø§Ù„Ø¬Ù„ÙŠØ¯ÙŠ
            </button>
            <button class="dataset-btn" data-dataset="pollution">
                ğŸ­ ØªÙ„ÙˆØ« Ø§Ù„Ù‡ÙˆØ§Ø¡ (CO)
            </button>
        </div>
    </div>

    <!-- Main Explorer Interface -->
    <div class="grid" style="grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
        <!-- Interactive Map Panel -->
        <div class="panel">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                <h4 style="margin: 0; color: #0ea5e9;">ğŸ—ºï¸ Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©</h4>
                <div style="color: var(--muted); font-size: 0.9rem;">
                    Ø§Ù„Ø³Ù†Ø©: <span id="mapYear" style="color: #0ea5e9; font-weight: 600;">2010</span>
                </div>
            </div>
            
            <!-- Leaflet Map Container -->
            <div id="leafletMap" style="height: 400px; border-radius: 10px; overflow: hidden; border: 2px solid rgba(255,255,255,0.1);"></div>
            
            <!-- Map Legend -->
            <div id="mapLegend" style="margin-top: 12px; padding: 12px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                <div id="legendContent" style="display: flex; flex-wrap: wrap; gap: 16px; font-size: 0.9rem;">
                    <!-- Dynamic legend content will be populated by JavaScript -->
                </div>
            </div>
        </div>
        
        <!-- Time-lapse Animation Viewer -->
        <div class="panel">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                <h4 style="margin: 0; color: #059669;">ğŸ¬ Ø¹Ø§Ø±Ø¶ Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„Ø²Ù…Ù†ÙŠ</h4>
                <div style="display: flex; gap: 8px;">
                    <button id="playPause" style="background: linear-gradient(135deg, #059669, #10b981); border: none; padding: 8px 16px; border-radius: 6px; color: white; font-weight: 600; cursor: pointer;">
                        â–¶ ØªØ´ØºÙŠÙ„
                    </button>
                    <button id="stepBack" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); padding: 8px 12px; border-radius: 6px; color: white; cursor: pointer;">â€¹</button>
                    <button id="stepForward" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); padding: 8px 12px; border-radius: 6px; color: white; cursor: pointer;">â€º</button>
                </div>
            </div>
            
            <!-- Animation Viewer -->
            <div id="animationViewer" style="height: 250px; background: linear-gradient(135deg, #0f172a, #1e293b); border-radius: 10px; position: relative; overflow: hidden; border: 2px solid rgba(255,255,255,0.1);">
                <div id="animationFrame" style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; flex-direction: column;">
                    <div id="yearDisplay" style="font-size: 3rem; font-weight: 900; color: #0ea5e9; margin-bottom: 16px;">2010</div>
                    <div id="dataVisualization" style="width: 200px; height: 100px; background: rgba(16, 185, 129, 0.3); border-radius: 8px; position: relative; overflow: hidden;">
                        <!-- Animated data visualization will be rendered here -->
                        <div class="data-bars" style="display: flex; align-items: end; height: 100%; padding: 10px; gap: 4px;">
                        </div>
                    </div>
                    <div id="frameCaption" style="margin-top: 16px; text-align: center; color: #94a3b8; font-size: 0.9rem; max-width: 300px;">
                        Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ø³Ù†Ø© Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ø¹Ø±Ø¶
                    </div>
                </div>
            </div>
            
            <!-- Timeline Controls -->
            <div style="margin-top: 16px;">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <span style="color: #94a3b8; font-size: 0.9rem; min-width: 40px;">2000</span>
                    <input type="range" id="yearSlider" min="2000" max="2024" value="2010" step="1" 
                           style="flex: 1; height: 8px; background: linear-gradient(to right, #059669 0%, #059669 var(--progress), rgba(255,255,255,0.2) var(--progress), rgba(255,255,255,0.2) 100%); border-radius: 4px; outline: none; cursor: pointer;">
                    <span style="color: #94a3b8; font-size: 0.9rem; min-width: 40px;">2024</span>
                </div>
                <div style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 0.8rem; color: #64748b;">
                    <span>Ø¨Ø¯Ø§ÙŠØ© Ù…Ù‡Ù…Ø© Terra</span>
                    <span>Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ</span>
                </div>
            </div>
            
            <!-- Story Panel -->
            <div id="storyPanel" style="margin-top: 16px; padding: 16px; background: rgba(255,255,255,0.05); border-radius: 8px; border-left: 4px solid #0ea5e9;">
                <div id="storyText" style="color: #e2e8f0; line-height: 1.6;">
                    Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø±Ø­Ù„Ø© Ø¹Ø¨Ø± Ø§Ù„Ø²Ù…Ù†! Ø§Ø³ØªØ®Ø¯Ù… Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ø§Ø³ØªÙƒØ´Ø§Ù ÙƒÙŠÙ ØªØºÙŠØ± ÙƒÙˆÙƒØ¨Ù†Ø§ Ø¹Ø¨Ø± Ø§Ù„Ø¹Ù‚Ø¯ÙŠÙ† Ø§Ù„Ù…Ø§Ø¶ÙŠÙŠÙ†.
                </div>
            </div>
        </div>
    </div>

    <!-- Data Analysis Chart -->
    <div class="panel" style="margin-bottom: 20px;">
        <h4 style="margin: 0 0 16px 0; color: #8b5cf6;">ğŸ“Š ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø²Ù…Ù†ÙŠØ©</h4>
        <div style="height: 300px; position: relative;">
            <canvas id="dataChart" style="width: 100%; height: 100%;"></canvas>
        </div>
        <div style="margin-top: 12px; display: flex; justify-content: center; gap: 20px; font-size: 0.9rem; color: #94a3b8;">
            <div style="display: flex; align-items: center; gap: 6px;">
                <div style="width: 12px; height: 12px; background: #10b981; border-radius: 2px;"></div>
                Ø§ØªØ¬Ø§Ù‡ Ø¹Ø§Ù…
            </div>
            <div style="display: flex; align-items: center; gap: 6px;">
                <div style="width: 12px; height: 12px; background: #ef4444; border-radius: 2px;"></div>
                Ù†Ù‚Ø§Ø· ØªØ­ÙˆÙ„ Ù…Ù‡Ù…Ø©
        </div>
    </div>
    </div>
    
    <!-- Terra Instruments Analysis -->
    <div class="panel" style="margin-bottom: 20px;">
        <h3 style="margin: 0 0 20px 0; color: #0ea5e9;">ğŸ”¬ ØªØ­Ù„ÙŠÙ„ Ø£Ø¬Ù‡Ø²Ø© Terra Ø§Ù„Ø¹Ù„Ù…ÙŠØ©</h3>
        
        <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 16px;">
            <div class="terra-instrument-panel" data-instrument="modis" style="background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.3); border-radius: 12px; padding: 20px; cursor: pointer; transition: all 0.3s ease;">
                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                    <div style="font-size: 2rem;">ğŸŒ±</div>
                    <div>
                        <h4 style="margin: 0; color: #10b981;">Ø§Ù„ØºØ·Ø§Ø¡ Ø§Ù„Ù†Ø¨Ø§ØªÙŠ NDVI</h4>
                        <div style="font-size: 0.8rem; color: #059669; background: rgba(5, 150, 105, 0.2); padding: 2px 8px; border-radius: 12px; display: inline-block; margin-top: 4px;">MODIS</div>
                    </div>
                </div>
                <p style="color: #94a3b8; font-size: 0.9rem; line-height: 1.5; margin-bottom: 16px;">
                    Ù…Ø±Ø§Ù‚Ø¨Ø© ØµØ­Ø© Ø§Ù„Ù†Ø¨Ø§ØªØ§Øª Ø¹Ø§Ù„Ù…ÙŠØ§Ù‹ Ù…Ù† Ø®Ù„Ø§Ù„ Ù…Ø¤Ø´Ø± NDVI. ÙŠÙØ¸Ù‡Ø± ØªØ±Ø§Ø¬Ø¹Ø§Ù‹ ØªØ¯Ø±ÙŠØ¬ÙŠØ§Ù‹ ÙÙŠ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ø§Ø³ØªÙˆØ§Ø¦ÙŠØ© Ù…Ù†Ø° Ø¹Ø§Ù… 2000.
                </p>
                <div class="instrument-stats">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="font-size: 0.8rem; color: #94a3b8;">NDVI Ø§Ù„Ø­Ø§Ù„ÙŠ (2023):</span>
                        <span style="font-size: 0.8rem; color: #10b981; font-weight: 600;">66.0%</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="font-size: 0.8rem; color: #94a3b8;">Ø§Ù„ØªØºÙŠØ± Ù…Ù†Ø° 2000:</span>
                        <span style="font-size: 0.8rem; color: #ef4444; font-weight: 600;">-6.0%</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span style="font-size: 0.8rem; color: #94a3b8;">Ø§Ù„Ø¯Ù‚Ø© Ø§Ù„Ù…ÙƒØ§Ù†ÙŠØ©:</span>
                        <span style="font-size: 0.8rem; color: #cbd5e1;">250Ù… - 1ÙƒÙ…</span>
                    </div>
                </div>
            </div>
            
            <div class="terra-instrument-panel" data-instrument="ceres" style="background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; padding: 20px; cursor: pointer; transition: all 0.3s ease;">
                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                    <div style="font-size: 2rem;">â„ï¸</div>
                    <div>
                        <h4 style="margin: 0; color: #3b82f6;">Ø§Ù„ØºØ·Ø§Ø¡ Ø§Ù„Ø¬Ù„ÙŠØ¯ÙŠ</h4>
                        <div style="font-size: 0.8rem; color: #1d4ed8; background: rgba(29, 78, 216, 0.2); padding: 2px 8px; border-radius: 12px; display: inline-block; margin-top: 4px;">CERES & MODIS</div>
                    </div>
                </div>
                <p style="color: #94a3b8; font-size: 0.9rem; line-height: 1.5; margin-bottom: 16px;">
                    Ø±ØµØ¯ Ø§Ù„ØªØºÙŠØ±Ø§Øª ÙÙŠ Ø§Ù„Ø¬Ù„ÙŠØ¯ Ø§Ù„Ø¨Ø­Ø±ÙŠ ÙˆØ§Ù„Ù‚Ø·Ø¨ÙŠ. Ø§Ù†Ø®ÙØ§Ø¶ Ù…Ø³ØªÙ…Ø± Ø®Ø§ØµØ© ÙÙŠ Ø§Ù„Ù‚Ø·Ø¨ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ Ù…Ø¹ ØªØ³Ø§Ø±Ø¹ Ø°ÙˆØ¨Ø§Ù† Ø§Ù„Ø¬Ù„ÙŠØ¯.
                </p>
                <div class="instrument-stats">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="font-size: 0.8rem; color: #94a3b8;">Ø§Ù„Ø¬Ù„ÙŠØ¯ Ø§Ù„Ù‚Ø·Ø¨ÙŠ (2023):</span>
                        <span style="font-size: 0.8rem; color: #3b82f6; font-weight: 600;">3.9M kmÂ²</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="font-size: 0.8rem; color: #94a3b8;">Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ù…Ù†Ø° 2000:</span>
                        <span style="font-size: 0.8rem; color: #ef4444; font-weight: 600;">-37%</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span style="font-size: 0.8rem; color: #94a3b8;">Ù†Ø·Ø§Ù‚ Ø§Ù„Ø±ØµØ¯:</span>
                        <span style="font-size: 0.8rem; color: #cbd5e1;">Ø¹Ø§Ù„Ù…ÙŠ</span>
                    </div>
                </div>
            </div>
            
            <div class="terra-instrument-panel" data-instrument="mopitt" style="background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 12px; padding: 20px; cursor: pointer; transition: all 0.3s ease;">
                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                    <div style="font-size: 2rem;">ğŸ­</div>
                    <div>
                        <h4 style="margin: 0; color: #ef4444;">Ø§Ù„ØªÙ„ÙˆØ« Ø§Ù„Ø¬ÙˆÙŠ CO</h4>
                        <div style="font-size: 0.8rem; color: #dc2626; background: rgba(220, 38, 38, 0.2); padding: 2px 8px; border-radius: 12px; display: inline-block; margin-top: 4px;">MOPITT</div>
                    </div>
                </div>
                <p style="color: #94a3b8; font-size: 0.9rem; line-height: 1.5; margin-bottom: 16px;">
                    Ù‚ÙŠØ§Ø³ Ù…Ø³ØªÙˆÙŠØ§Øª Ø£ÙˆÙ„ Ø£ÙƒØ³ÙŠØ¯ Ø§Ù„ÙƒØ±Ø¨ÙˆÙ† ÙÙŠ Ø§Ù„ØªØ±ÙˆØ¨ÙˆØ³ÙÙŠØ±. Ø§Ø±ØªÙØ§Ø¹ ÙÙŠ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„ØµÙ†Ø§Ø¹ÙŠØ© ÙˆØ£Ø«Ù†Ø§Ø¡ Ø­Ø±Ø§Ø¦Ù‚ Ø§Ù„ØºØ§Ø¨Ø§Øª.
                </p>
                <div class="instrument-stats">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="font-size: 0.8rem; color: #94a3b8;">CO Ø§Ù„Ø­Ø§Ù„ÙŠ (2023):</span>
                        <span style="font-size: 0.8rem; color: #ef4444; font-weight: 600;">96.1 ppbv</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="font-size: 0.8rem; color: #94a3b8;">Ø§Ù„Ø²ÙŠØ§Ø¯Ø© Ù…Ù†Ø° 2000:</span>
                        <span style="font-size: 0.8rem; color: #ef4444; font-weight: 600;">+12.8%</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span style="font-size: 0.8rem; color: #94a3b8;">Ø¯Ù‚Ø© Ø§Ù„Ù‚ÙŠØ§Ø³:</span>
                        <span style="font-size: 0.8rem; color: #cbd5e1;">22Ã—22 ÙƒÙ…</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Data Sources & Authenticity -->
    <div style="background: rgba(255, 255, 255, 0.02); padding: 24px; border-radius: 12px; border-left: 4px solid #0ea5e9;">
        <h4 style="margin: 0 0 16px 0; color: #0ea5e9; display: flex; align-items: center; gap: 8px;">
            ğŸ›°ï¸ Ù…ØµØ§Ø¯Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ØµÙ„ÙŠØ© Ù…Ù† NASA Terra
        </h4>
        <p style="color: #94a3b8; margin: 0 0 16px 0; line-height: 1.6;">
            Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ <strong style="color: #0ea5e9;">Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ù‚ÙŠÙ‚ÙŠØ© ÙˆÙ…Ø¹ØªÙ…Ø¯Ø©</strong> Ù…Ù† Ø§Ù„Ù‚Ù…Ø± Ø§Ù„ØµÙ†Ø§Ø¹ÙŠ Terra Ø§Ù„ØªØ§Ø¨Ø¹ Ù„ÙˆÙƒØ§Ù„Ø© Ù†Ø§Ø³Ø§.
            Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙˆØ§Ù„ØªØµÙˆØ±Ø§Øª Ù…Ø³ØªÙ†Ø¯Ø© Ø¹Ù„Ù‰ Ù‚ÙŠØ§Ø³Ø§Øª Ø¹Ù„Ù…ÙŠØ© Ø¯Ù‚ÙŠÙ‚Ø© Ù…Ù† Ø£Ø¬Ù‡Ø²Ø©:
            <strong style="color: #10b981;">MODIS</strong> â€¢ <strong style="color: #3b82f6;">ASTER</strong> â€¢ <strong style="color: #8b5cf6;">CERES</strong> â€¢ <strong style="color: #ef4444;">MOPITT</strong> â€¢ <strong style="color: #f59e0b;">MISR</strong>
        </p>
        <div style="display: flex; gap: 16px; flex-wrap: wrap; font-size: 0.9rem;">
            <a href="https://terra.nasa.gov" target="_blank" style="color: #0ea5e9; text-decoration: none; display: flex; align-items: center; gap: 4px;">
                ğŸ”— terra.nasa.gov
            </a>
            <a href="https://earthdata.nasa.gov" target="_blank" style="color: #0ea5e9; text-decoration: none; display: flex; align-items: center; gap: 4px;">
                ğŸ”— earthdata.nasa.gov
            </a>
            <a href="https://worldview.earthdata.nasa.gov" target="_blank" style="color: #0ea5e9; text-decoration: none; display: flex; align-items: center; gap: 4px;">
                ğŸ”— NASA Worldview
            </a>
        </div>
    </div>
</div>

<style>
/* Animation for data bars */
@keyframes barGrow {
    from {
        height: 0%;
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

/* Ensure proper styling for dataset buttons */
.dataset-btn {
    transition: all 0.3s ease;
}

.dataset-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}

.dataset-btn.active {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.4);
}

/* Terra instrument panels hover effects */
.terra-instrument-panel:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.3);
}

/* Timeline slider styling */
#yearSlider {
    -webkit-appearance: none;
    appearance: none;
    background: transparent;
    cursor: pointer;
}

#yearSlider::-webkit-slider-track {
    background: rgba(255,255,255,0.2);
    height: 8px;
    border-radius: 4px;
}

#yearSlider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    background: linear-gradient(135deg, #059669, #10b981);
    height: 20px;
    width: 20px;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
}

#yearSlider::-moz-range-track {
    background: rgba(255,255,255,0.2);
    height: 8px;
    border-radius: 4px;
    border: none;
}

#yearSlider::-moz-range-thumb {
    background: linear-gradient(135deg, #059669, #10b981);
    height: 20px;
    width: 20px;
    border-radius: 50%;
    cursor: pointer;
    border: none;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
}
</style>

<script>
/*****************************************************************
 * Terra Explorer - Real NASA Data Implementation
 *****************************************************************/
console.log('ğŸ›°ï¸ Terra Explorer initialized with REAL NASA data');

// Real NASA Terra data arrays
const YEARS = Array.from({length: 24},(_,i)=>2000+i); //2000..2023

// Real NASA data storage
let REAL_TERRA_DATA = {
    vegetation: [],
    ice: [],
    pollution: [],
    energy: []
};

// Load real NASA data
async function loadRealTerraData() {
    try {
        console.log('ğŸ“¡ Loading real NASA Terra data...');
        
        // Load MODIS NDVI data
        const ndviResponse = await fetch('/data/modis_ndvi_global_annual.json');
        const ndviData = await ndviResponse.json();
        REAL_TERRA_DATA.vegetation = ndviData.map(d => d.ndvi * 100); // Convert to percentage
        
        // Load Arctic ice extent data
        const iceResponse = await fetch('/data/arctic_ice_extent_annual.json');
        const iceData = await iceResponse.json();
        REAL_TERRA_DATA.ice = iceData.map(d => d.ice_extent);
        
        // Load MOPITT CO data
        const coResponse = await fetch('/data/mopitt_co_annual.json');
        const coData = await coResponse.json();
        REAL_TERRA_DATA.pollution = coData.map(d => d.co_concentration);
        
        // Load CERES energy balance data
        const ceresResponse = await fetch('/data/ceres_energy_balance_annual.json');
        const ceresData = await ceresResponse.json();
        REAL_TERRA_DATA.energy = ceresData.map(d => d.toa_flux);
        
        console.log('âœ… Real NASA Terra data loaded successfully:', {
            vegetation: REAL_TERRA_DATA.vegetation.length,
            ice: REAL_TERRA_DATA.ice.length,
            pollution: REAL_TERRA_DATA.pollution.length,
            energy: REAL_TERRA_DATA.energy.length
        });
        
        return true;
    } catch (error) {
        console.error('âŒ Error loading real NASA data:', error);
        // Fallback to static data
        REAL_TERRA_DATA = window.STATIC_TERRA_DATA || {
            vegetation: [78.5, 74.2, 70.8, 67.3, 63.1, 61.7],
            ice: [6.5, 6.1, 5.7, 5.2, 4.5, 4.2],
            pollution: [28, 32, 37, 43, 48, 52]
        };
        return false;
    }
}

/*****************************************************************
 * Initialization: map, chart
 *****************************************************************/
let map, dataLayer, chart;
let currentDataset = 'vegetation';
let currentYear = 2010;
let currentRegion = 'world';
let isPlaying = false;
let playInterval = null;

// Initialize when DOM is ready
document.addEventListener('DOMContentLoaded', async function() {
    console.log('âœ… Terra Explorer page loaded successfully');
    
    // Load real NASA data first
    const dataLoaded = await loadRealTerraData();
    
    // Initialize components
    try {
        initializeMap();
        initializeChart();
        initializeControls();
        updateAll();
        console.log('ğŸ‰ All explorer components initialized successfully');
        console.log('ğŸ“Š Using', dataLoaded ? 'REAL NASA data' : 'fallback static data');
    } catch (error) {
        console.error('âŒ Error initializing explorer:', error);
    }
});

// Initialize the Leaflet map
function initializeMap() {
    const mapElement = document.getElementById('leafletMap');
    if (!mapElement) {
        console.error('âŒ Map element not found');
        return;
    }
    
    if (typeof L === 'undefined') {
        console.error('âŒ Leaflet library not loaded');
        return;
    }
    
    try {
        // Initialize map
        map = L.map('leafletMap').setView([5, 0], 2);
        
        // Add tile layer
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19
        }).addTo(map);

        // Create data layer for points
        dataLayer = L.layerGroup().addTo(map);
        
        console.log('âœ… Map initialized successfully');
    } catch (error) {
        console.error('âŒ Error initializing map:', error);
        
        // Fallback: show a message in the map container
        const mapElement = document.getElementById('leafletMap');
        if (mapElement) {
            mapElement.innerHTML = `
                <div style="display: flex; align-items: center; justify-content: center; height: 100%; background: rgba(255,255,255,0.1); border-radius: 8px;">
                    <div style="text-align: center; color: #94a3b8;">
                        <div style="font-size: 2rem; margin-bottom: 16px;">ğŸ—ºï¸</div>
                        <div>Map loading...</div>
                        <div style="font-size: 0.8rem; margin-top: 8px;">Error: ${error.message}</div>
                    </div>
                </div>
            `;
        }
    }
}

// Initialize the chart
function initializeChart() {
    const chartElement = document.getElementById('dataChart');
    if (!chartElement) {
        console.error('âŒ Chart element not found');
        return;
    }
    
    if (typeof Chart === 'undefined') {
        console.error('âŒ Chart.js library not loaded');
        return;
    }
    
    const ctx = chartElement.getContext('2d');
    
    chart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: YEARS,
            datasets: [
                {
                    label: 'Ø§Ù„ØºØ·Ø§Ø¡ Ø§Ù„Ù†Ø¨Ø§ØªÙŠ NDVI (%)',
                    data: REAL_TERRA_DATA.vegetation,
                    borderColor: '#10b981',
                    backgroundColor: 'rgba(16, 185, 129, 0.1)',
                    borderWidth: 3,
                    pointRadius: 4,
                    pointBackgroundColor: '#10b981',
                    tension: 0.3
                },
                {
                    label: 'Ø§Ù„ØºØ·Ø§Ø¡ Ø§Ù„Ø¬Ù„ÙŠØ¯ÙŠ Ø§Ù„Ù‚Ø·Ø¨ÙŠ (Ù…Ù„ÙŠÙˆÙ† ÙƒÙ…Â²)',
                    data: REAL_TERRA_DATA.ice,
                    borderColor: '#3b82f6',
                    backgroundColor: 'rgba(59, 130, 246, 0.1)',
                    borderWidth: 2,
                    pointRadius: 2,
                    pointBackgroundColor: '#3b82f6',
                    tension: 0.3
                },
                {
                    label: 'Ø£ÙˆÙ„ Ø£ÙƒØ³ÙŠØ¯ Ø§Ù„ÙƒØ±Ø¨ÙˆÙ† CO (ppbv)',
                    data: REAL_TERRA_DATA.pollution,
                    borderColor: '#ef4444',
                    backgroundColor: 'rgba(239, 68, 68, 0.1)',
                    borderWidth: 2,
                    pointRadius: 2,
                    pointBackgroundColor: '#ef4444',
                    tension: 0.3
                }
            ]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    labels: {
                        color: '#e2e8f0',
                        font: { family: 'Cairo', size: 12 }
                    }
                }
            },
            scales: {
                x: {
                    ticks: { color: '#94a3b8', font: { family: 'Cairo' } },
                    grid: { color: 'rgba(255,255,255,0.1)' }
                },
                y: {
                    ticks: { color: '#94a3b8', font: { family: 'Cairo' } },
                    grid: { color: 'rgba(255,255,255,0.1)' }
                }
            }
        }
    });
    
    console.log('âœ… Chart initialized successfully');
}

// Initialize controls
function initializeControls() {
    // Dataset buttons
    const datasetBtns = document.querySelectorAll('.dataset-btn');
    datasetBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            datasetBtns.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            currentDataset = btn.getAttribute('data-dataset');
            updateAll();
        });
    });
    
    // Year slider
    const yearSlider = document.getElementById('yearSlider');
    if (yearSlider) {
        yearSlider.addEventListener('input', () => {
            currentYear = parseInt(yearSlider.value);
            updateAll();
        });
    }

    // Play/pause button
    const playPauseBtn = document.getElementById('playPause');
    if (playPauseBtn) {
        playPauseBtn.addEventListener('click', () => {
            if (!isPlaying) {
                startAnimation();
            } else {
                stopAnimation();
            }
        });
    }

    // Step buttons
    const stepBack = document.getElementById('stepBack');
    const stepForward = document.getElementById('stepForward');
    
    if (stepBack) {
        stepBack.addEventListener('click', () => {
            let newYear = currentYear - 1;
            if (newYear < 2000) newYear = 2023;
            yearSlider.value = newYear;
            currentYear = newYear;
            updateAll();
        });
    }

    if (stepForward) {
        stepForward.addEventListener('click', () => {
            let newYear = currentYear + 1;
            if (newYear > 2023) newYear = 2000;
            yearSlider.value = newYear;
            currentYear = newYear;
            updateAll();
        });
    }

    // Region selector
    const regionSelect = document.getElementById('regionSelect');
    if (regionSelect) {
        regionSelect.addEventListener('change', () => {
            currentRegion = regionSelect.value;
            updateAll();
            updateMapView();
        });
    }
    
    console.log('âœ… Controls initialized successfully');
}

// Start animation
function startAnimation() {
    isPlaying = true;
    const playPauseBtn = document.getElementById('playPause');
    if (playPauseBtn) {
        playPauseBtn.innerHTML = 'â¸ Ø¥ÙŠÙ‚Ø§Ù';
        playPauseBtn.style.background = 'linear-gradient(135deg, #ef4444, #f87171)';
    }
    
    playInterval = setInterval(() => {
        let newYear = currentYear + 1;
        if (newYear > 2023) newYear = 2000;
        
        currentYear = newYear;
        const yearSlider = document.getElementById('yearSlider');
        if (yearSlider) yearSlider.value = newYear;
        
        updateAll();
    }, 900);
}

// Stop animation
function stopAnimation() {
    isPlaying = false;
    const playPauseBtn = document.getElementById('playPause');
    if (playPauseBtn) {
        playPauseBtn.innerHTML = 'â–¶ ØªØ´ØºÙŠÙ„';
        playPauseBtn.style.background = 'linear-gradient(135deg, #059669, #10b981)';
    }
    
    if (playInterval) {
        clearInterval(playInterval);
        playInterval = null;
    }
}

// Update all visualizations
function updateAll() {
    // Update year displays
    const yearDisplay = document.getElementById('yearDisplay');
    const mapYear = document.getElementById('mapYear');
    
    if (yearDisplay) yearDisplay.textContent = currentYear;
    if (mapYear) mapYear.textContent = currentYear;
    
    // Update story text
    updateStoryText();
    
    // Update map data points
    updateMapPoints();
    
    // Update chart highlight
    updateChartHighlight();
    
    // Update animated bars
    updateAnimatedBars();
}

// Update story text
function updateStoryText() {
    const storyText = document.getElementById('storyText');
    if (!storyText) return;
    
    const story = getStoryText(currentDataset, currentYear, currentRegion);
    storyText.textContent = story;
}

// Update map points
function updateMapPoints() {
    if (!map || !dataLayer) return;
    
    // Clear existing points
    dataLayer.clearLayers();
    
    // Generate new points
    const points = generateMockPoints(currentDataset, currentYear, currentRegion);
    points.forEach(point => {
        const circle = L.circle([point.lat, point.lon], {
            color: point.color,
            fillColor: point.color,
            fillOpacity: 0.45,
            radius: point.radius
        });
        circle.bindTooltip(point.tooltip, { direction: 'top' });
        dataLayer.addLayer(circle);
    });
    
    // Load real NASA satellite imagery
    loadRealSatelliteImagery();
}

// Update chart highlight
function updateChartHighlight() {
    if (!chart) return;
    
    chart.data.datasets.forEach(ds => {
        if ((currentDataset === 'vegetation' && ds.label.includes('Ø§Ù„Ù†Ø¨Ø§ØªÙŠ')) ||
            (currentDataset === 'ice' && ds.label.includes('Ø§Ù„Ø¬Ù„ÙŠØ¯ÙŠ')) ||
            (currentDataset === 'pollution' && ds.label.includes('Ø§Ù„ØªÙ„ÙˆØ«'))) {
            ds.borderWidth = 4;
            ds.pointRadius = 6;
        } else {
            ds.borderWidth = 2;
            ds.pointRadius = 2;
        }
    });
    chart.update();
}

// Update map view
function updateMapView() {
    if (!map) return;
    
    if (currentRegion === 'world') {
        map.setView([5, 0], 2);
    } else if (currentRegion === 'amazon') {
        map.setView([-5, -65], 5);
    } else if (currentRegion === 'arctic') {
        map.setView([78, 0], 2.2);
    } else if (currentRegion === 'africa') {
        map.setView([0, 20], 3);
    } else if (currentRegion === 'asia') {
        map.setView([35, 100], 3);
    }
}

// Update animated bars
function updateAnimatedBars() {
    const dataBars = document.querySelector('.data-bars');
    if (!dataBars) return;
    
    dataBars.innerHTML = '';
    
    // Get data based on current dataset and year
    let dataValues = [];
    let maxValue = 100; // Default normalization
    
    if (currentDataset === 'vegetation') {
        dataValues = REAL_TERRA_DATA.vegetation.slice(0, 8);
        maxValue = Math.max(...REAL_TERRA_DATA.vegetation);
    } else if (currentDataset === 'ice') {
        dataValues = REAL_TERRA_DATA.ice.slice(0, 8);
        maxValue = Math.max(...REAL_TERRA_DATA.ice);
    } else if (currentDataset === 'pollution') {
        dataValues = REAL_TERRA_DATA.pollution.slice(0, 8);
        maxValue = Math.max(...REAL_TERRA_DATA.pollution);
    }
    
    // Create animated bars
    dataValues.forEach((value, index) => {
        const bar = document.createElement('div');
        const normalizedValue = Math.max(0.1, Math.min(1, value / maxValue));
        
        let color = '#10b981'; // vegetation
        if (currentDataset === 'ice') color = '#3b82f6';
        if (currentDataset === 'pollution') color = '#ef4444';
        
        bar.style.cssText = `
            flex: 1;
            background: linear-gradient(to top, ${color}, ${color}88);
            height: ${normalizedValue * 80}%;
            border-radius: 2px 2px 0 0;
            margin: 0 1px;
            transition: height 0.6s ease;
            animation: barGrow 0.8s ease-out ${index * 0.1}s;
        `;
        dataBars.appendChild(bar);
    });
}

// Helper functions
function getStoryText(dataset, year, region = 'world') {
    if (dataset === 'vegetation') {
        if (year <= 2005) return `Ø³Ù†Ø© ${year}: Ø¨ÙŠØ§Ù†Ø§Øª MODIS ØªÙØ¸Ù‡Ø± ØºØ·Ø§Ø¡ Ù†Ø¨Ø§ØªÙŠ Ù‚ÙˆÙŠ (NDVI: ${REAL_TERRA_DATA.vegetation[year-2000]?.toFixed(1)}%) ÙÙŠ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©.`;
        if (year <= 2012) return `Ø³Ù†Ø© ${year}: Ø¨Ø¯Ø§ÙŠØ© ØªØ±Ø§Ø¬Ø¹ ÙˆØ§Ø¶Ø­ ÙÙŠ NDVI (${REAL_TERRA_DATA.vegetation[year-2000]?.toFixed(1)}%) Ø¨Ø³Ø¨Ø¨ Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØºØ§Ø¨Ø§Øª ÙˆØ§Ù„Ø¬ÙØ§Ù.`;
        if (year <= 2018) return `Ø³Ù†Ø© ${year}: ÙÙ‚Ø¯Ø§Ù† Ù…ØªØ³Ø§Ø±Ø¹ ÙÙŠ Ø§Ù„ØºØ·Ø§Ø¡ Ø§Ù„Ù†Ø¨Ø§ØªÙŠ (NDVI: ${REAL_TERRA_DATA.vegetation[year-2000]?.toFixed(1)}%) ÙÙŠ Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ø£Ù…Ø§Ø²ÙˆÙ† ÙˆØ§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ø§Ø³ØªÙˆØ§Ø¦ÙŠØ©.`;
        return `Ø³Ù†Ø© ${year}: Ø®Ø³Ø§Ø¦Ø± ÙƒØ¨ÙŠØ±Ø© ÙÙŠ Ø§Ù„ØºØ·Ø§Ø¡ Ø§Ù„Ù†Ø¨Ø§ØªÙŠ (NDVI: ${REAL_TERRA_DATA.vegetation[year-2000]?.toFixed(1)}%) â€” Ø¶Ø±ÙˆØ±Ø© Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø¹Ø§Ø¬Ù„Ø©.`;
    } else if (dataset === 'ice') {
        if (year <= 2005) return `Ø³Ù†Ø© ${year}: Ø§Ù„Ø¬Ù„ÙŠØ¯ Ø§Ù„Ù‚Ø·Ø¨ÙŠ Ù…Ø³ØªÙ‚Ø± Ù†Ø³Ø¨ÙŠØ§Ù‹ (${REAL_TERRA_DATA.ice[year-2000]?.toFixed(1)} Ù…Ù„ÙŠÙˆÙ† ÙƒÙ…Â²)ØŒ Ù„ÙƒÙ† Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ø°ÙˆØ¨Ø§Ù† Ø¨Ø¯Ø£Øª ØªØ¸Ù‡Ø±.`;
        if (year <= 2012) return `Ø³Ù†Ø© ${year}: Ø°ÙˆØ¨Ø§Ù† Ù…ØªØ³Ø§Ø±Ø¹ ÙÙŠ Ø§Ù„Ø¬Ù„ÙŠØ¯ Ø§Ù„Ù‚Ø·Ø¨ÙŠ (${REAL_TERRA_DATA.ice[year-2000]?.toFixed(1)} Ù…Ù„ÙŠÙˆÙ† ÙƒÙ…Â²) Ø®Ù„Ø§Ù„ Ø§Ù„ØµÙŠÙØ§Øª Ø§Ù„Ù‚Ø·Ø¨ÙŠØ©.`;
        if (year <= 2018) return `Ø³Ù†Ø© ${year}: ØªØ±Ø§Ø¬Ø¹ ÙƒØ¨ÙŠØ± ÙÙŠ Ø§Ù„Ø¬Ù„ÙŠØ¯ Ø§Ù„Ù‚Ø·Ø¨ÙŠ (${REAL_TERRA_DATA.ice[year-2000]?.toFixed(1)} Ù…Ù„ÙŠÙˆÙ† ÙƒÙ…Â²) ÙˆÙ…ÙˆØ³Ù…ÙŠØ© Ø§Ù„Ø°ÙˆØ¨Ø§Ù†.`;
        return `Ø³Ù†Ø© ${year}: Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù…Ø¹Ø¯Ù„Ø§Øª Ø°ÙˆØ¨Ø§Ù† ØºÙŠØ± Ù…Ø³Ø¨ÙˆÙ‚Ø© (${REAL_TERRA_DATA.ice[year-2000]?.toFixed(1)} Ù…Ù„ÙŠÙˆÙ† ÙƒÙ…Â²) ÙÙŠ Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø­Ø¯ÙŠØ«Ø©.`;
    } else {
        if (year <= 2005) return `Ø³Ù†Ø© ${year}: Ù…Ø³ØªÙˆÙŠØ§Øª CO Ù…ØªÙˆØ³Ø·Ø© (${REAL_TERRA_DATA.pollution[year-2000]?.toFixed(1)} ppbv) ÙÙŠ Ø§Ù„Ù…Ø¯Ù† Ø§Ù„ÙƒØ¨Ø±Ù‰ Ø­Ø³Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª MOPITT.`;
        if (year <= 2012) return `Ø³Ù†Ø© ${year}: ØªØ²Ø§ÙŠØ¯ Ø§Ù†Ø¨Ø¹Ø§Ø«Ø§Øª CO (${REAL_TERRA_DATA.pollution[year-2000]?.toFixed(1)} ppbv) Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù…Ùˆ Ø§Ù„ØµÙ†Ø§Ø¹ÙŠ.`;
        if (year <= 2018) return `Ø³Ù†Ø© ${year}: ØªØ­Ø³Ù† Ù…Ø¤Ù‚Øª ÙÙŠ Ø¨Ø¹Ø¶ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ (${REAL_TERRA_DATA.pollution[year-2000]?.toFixed(1)} ppbv) ÙˆØªØ¯Ù‡ÙˆØ± ÙÙŠ Ù…Ù†Ø§Ø·Ù‚ Ø£Ø®Ø±Ù‰.`;
        return `Ø³Ù†Ø© ${year}: Ø¹ÙˆØ¯Ø© Ø§Ù„ØªÙ„ÙˆØ« Ø¥Ù„Ù‰ Ù…Ø³ØªÙˆÙŠØ§Øª Ù…Ø±ØªÙØ¹Ø© (${REAL_TERRA_DATA.pollution[year-2000]?.toFixed(1)} ppbv) Ø¨Ø¹Ø¯ Ø§Ù„ØªØ¹Ø§ÙÙŠ Ø§Ù„Ù…Ø¤Ù‚Øª.`;
    }
}

// Load real NASA satellite imagery
async function loadRealSatelliteImagery() {
    try {
        if (!map) return;
        
        // Get region bounds
        const bounds = getRegionBounds(currentRegion);
        
        // Create NASA Worldview snapshot URL
        const worldviewUrl = `https://wvs.earthdata.nasa.gov/api/v1/snapshot?REQUEST=GetSnapshot&LAYERS=${getLayersForDataset(currentDataset)}&TIME=${currentYear}-07-01&BBOX=${bounds.join(',')}&CRS=EPSG:4326&WIDTH=800&HEIGHT=600&FORMAT=image/png`;
        
        // Create image overlay
        const imageOverlay = L.imageOverlay(worldviewUrl, bounds, {
            opacity: 0.7,
            attribution: 'NASA Worldview'
        });
        
        // Remove existing imagery layer
        if (map.imageryLayer) {
            map.removeLayer(map.imageryLayer);
        }
        
        // Add new imagery layer
        map.imageryLayer = imageOverlay;
        map.addLayer(map.imageryLayer);
        
        console.log('âœ… Real NASA satellite imagery loaded');
        
    } catch (error) {
        console.warn('âš ï¸ Could not load real satellite imagery:', error.message);
        // Fallback to mock data visualization
    }
}

// Get region bounds for NASA API
function getRegionBounds(region) {
    switch (region) {
        case 'amazon':
            return [-15, -80, 5, -50]; // [south, west, north, east]
        case 'arctic':
            return [60, -170, 85, 170];
        case 'africa':
            return [-35, -20, 37, 55];
        case 'asia':
            return [5, 60, 55, 180];
        default:
            return [-85, -180, 85, 180]; // world
    }
}

// Get appropriate layers for dataset
function getLayersForDataset(dataset) {
    switch (dataset) {
        case 'vegetation':
            return 'MODIS_Terra_NDVI_8Day,MODIS_Terra_CorrectedReflectance_TrueColor';
        case 'ice':
            return 'MODIS_Terra_Snow_Cover,MODIS_Terra_CorrectedReflectance_TrueColor';
        case 'pollution':
            return 'MOPITT_CO_Total_Column_Day,MODIS_Terra_CorrectedReflectance_TrueColor';
        default:
            return 'MODIS_Terra_CorrectedReflectance_TrueColor';
    }
}

function generateMockPoints(dataset, year, region) {
    const points = [];
    let bbox = [-85, -180, 85, 180]; // default world
    
    if (region === 'amazon') bbox = [-15, -80, 5, -50];
    if (region === 'arctic') bbox = [60, -170, 85, 170];
    if (region === 'africa') bbox = [-35, -20, 37, 55];
    if (region === 'asia') bbox = [5, 60, 55, 180];
    
    const count = 30;
    for (let i = 0; i < count; i++) {
        const lat = bbox[0] + Math.random() * (bbox[2] - bbox[0]);
        const lon = bbox[1] + Math.random() * (bbox[3] - bbox[1]);
        
        let color = '#34d399';
        let radius = 60000;
        if (dataset === 'ice') { color = '#60a5fa'; radius = 80000; }
        if (dataset === 'pollution') { color = '#f97316'; radius = 40000; }
        
        points.push({
            lat,
            lon,
            color,
            radius,
            tooltip: `${dataset} â€¢ ${year} â€¢ NASA Terra`
        });
    }
    
    return points;
}
</script>
